<!doctype html>
<html lang="en">
<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <script src="/static/js/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="shortcut icon" href="/static/img/icons/favicon.ico">
    <link rel="stylesheet" href="/static/css/icalc_css.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- UI Javascript -->
    <script src="/static/js/dec-stripe.js"></script>
    
    <link rel="stylesheet" href="/static/css/bs-stepper.min.css">
    <script src="/static/js/bs-stepper.min.js"></script>

    <!-- web3 -->
    <script src="/static/js/web3/web3.js"></script>


<title>dec-stripe</title>
</head>
<body class="colorshade">
<div >
   <div id="head_bar" class="row top_bar" style="margin:0px">
   <div id="go_back_button" class="col-5" style="text-align:left">
   <span class="button-label" onclick="pageBack();">&larr; BACK</span>
   </div>
   <div class="col-7" style="text-align:right">
   <span id="account_address" style="background:rgb(45, 51, 59); border-radius:3px; padding:4px;padding-left:10px;padding-right:10px; color:">Not connected</span>
   </div>
   </div>

   <div id="all_content" style="margin-top:30px" class="container-fluid">
      <div id="content_card" class="content_section shadow cloud-container" style="background-color:white;border-radius: 5px;">
      </div>
   </div>
</div>
</body>
</html>


<!-- BEFORE CONNECTING -->
<script  id="before_connecting_element" language="text">
<!-- desktop version -->
<div id="content_card" class="desk content_section shadow cloud-container" style="background-color:white;border-radius: 5px;">
<div style="text-align:center;width:90%;position: absolute;top: 50%;left: 50%;-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);">

   <img  style="width:40%" src="/static/img/Mobile_payment@2x.png"/>
   <br><span style="font-size:18pt; 	font-family: 'Museo Sans Cyrl';font-weight: 500;">Welcome to OnePay</span>
   <br><span style="font-size:14pt">OnePay is a fully decentralized way to accept crypto payments for your online business.</span>
   <br><span style="font-size:14pt; color:rgb(190,190,190); border-bottom: 1px dashed rgb(190,190,190)">Why is this great?</span>
   <br>
   <br>
   <br><span>Start by connecting your wallet</span>
   <br>
   <br>
   <button type="button" class="btn green-button" onclick="connectWeb3()">Connect</button>
   <br>
   <br>
</div>
</div>
<!-- mobile version -->
<div id="content_card" class="mobi content_section shadow cloud-container" style="background-color:white;border-radius: 5px;">
<div style="text-align:center;width:90%;position: absolute;top: 50%;left: 50%;-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);">
   <img  style="width:70%" src="/static/img/Mobile_payment@2x.png"/><br>
   <br><span style="font-size:18pt; 	font-family: 'Museo Sans Cyrl';font-weight: 500;">Welcome to OnePay</span>
   <br><span style="font-size:14pt">OnePay is a fully decentralized way to accept crypto payments for your online business.</span>
   <br><span style="font-size:14pt; color:rgb(190,190,190); border-bottom: 1px dashed rgb(190,190,190)">Why is this great?</span>
   <br>
   <br>
   <br><span>Start by connecting your wallet</span>
   <br>
   <br>
   <button type="button" class="btn green-button" onclick="connectWeb3()">Connect</button>
   <br>
   <br>
</div>
</div>
</script>


<!-- CREATE FIRST CHECKOUT -->
<script  id="create_new_checkout_element" language="text">
<div id="content_card" class="content_section shadow cloud-container" style="background-color:white;border-radius: 5px;">
<div style="text-align:center;width:90%;position: absolute;top: 50%;left: 50%;-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);">
   <img  class="desk" style="width:200px" src="/static/img/store.png"/>
   <img  class="mobi" style="width:150px" src="/static/img/store.png"/>
   <br><br>
   <div class="bs-stepper">
      <div class="bs-stepper-header" role="tablist">
         <!-- your steps here -->
         <div class="step active" data-target="#logins-part">
            <button class="step-trigger" role="tab" aria-controls="logins-part" id="logins-part-trigger">
            <span class="bs-stepper-circle">&#10003;</span>
            <span class="bs-stepper-label">Connect </span>
            </button>
         </div>
         <div class="line"></div>
         <div class="step" data-target="#information-part">
            <button type="button" class="step-trigger" role="tab" aria-controls="information-part" id="information-part-trigger">
            <span class="bs-stepper-circle">2</span>
            <span class="bs-stepper-label">Create store</span>
            </button>
         </div>
         <div class="line"></div>
         <div class="step" data-target="#information-part">
            <button type="button" class="step-trigger" role="tab" aria-controls="information-part" id="information-part-trigger">
            <span class="bs-stepper-circle">3</span>
            <span class="bs-stepper-label">Done!  </span>
            </button>
         </div>
      </div>
      <div class="bs-stepper-content">
         <!-- your steps content here -->
         <div id="logins-part" class="content" role="tabpanel" aria-labelledby="logins-part-trigger"></div>
         <div id="information-part" class="content" role="tabpanel" aria-labelledby="information-part-trigger"></div>
      </div>
   </div>
   <span>That's great! Now let's create your store.<br>You will be able to add products, set prices and accept payments in crypto.</span>
   <br>
   <br>
   <br>
   <button type="button" class="btn green-button" onclick="createPaymentContractPopup()">Create my store</button>
   <br>
   <br>
   <div id="existing_stores"></div>
</div>
</div>
</script>


<!-- CREATE STORE MODAL --> 
<div class="modal fade" id="create_store_modal" style="	font-family: 'Museo Sans Cyrl';font-weight: 100" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content" style="padding:20px; text-align:center">
         <br>
         <br>
         <span id="pay_product_name" class="modal-title" style="text-align:center">Pick a name for your new store:</span>
         <br>
         <div class="input-group">
            <input style="width:70%" type="text" class="form-control" oninput="updateStoreName(this)" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
         </div>
         <br>
         <br>
         <div>
            <button type="button" class="btn green-button" onclick="createPaymentContract()">Create</button>
         </div>
         <br>
         <br>
      </div>
   </div>
</div>



<!-- EXISTING CHECKOUTS -->
<script  id="existing_checkouts_element" language="text">
<!-- desktop version -->
<div id="content_card" class="desk content_section shadow adaptable-cloud-container" style="background-color:white;border-radius: 5px;">
<div class="desk" style="padding:5%">
   <span style="font-size:16pt; font-family: 'Museo Sans Cyrl';font-weight: 300;">Manage your stores:</span>
   <br><br><br>
   <div id="existing_stores_desk" style="padding-left:30px; padding-right:30px"></div>
   <br>
   <br>
   <div style="text-align:center">
       <button type="button" class="btn green-button" onclick="createPaymentContractPopup()">Create new store</button>
   </div>
</div>
</div>
<!-- mobile version -->
<div id="content_card" class="mobi content_section shadow adaptable-cloud-container" style="background-color:white;border-radius: 5px;">
<div class="mobi" style="padding:5%">
   <span style="font-size:16pt; font-family: 'Museo Sans Cyrl';font-weight: 300;">Manage your stores:</span>
   <br>
   <div id="existing_stores_mobi" style="padding-left:30px; padding-right:30px"></div>
   <br>
   <br>
   <div style="text-align:center">
       <button type="button" class="btn green-button" onclick="createPaymentContractPopup()">Create new store</button>
   </div>
</div>
</div>
</script>





<!-- EXISTING STORE ROW -->
<script  id="existing_store_row" language="text">
<!-- desktop version -->
<div class="desk row shadow" style="height:90px;cursor:pointer;border-radius:5px; " onclick="manageStore(this)" contract_address="{contract_address}">
   <div class="col-1" style="padding:20px">
      <img style="height:50px; border-radius: 50%" src="{store_logo}" />
   </div>
   <div class="col-11" style="padding-top:20px">
      <span style="font-size:14pt; font-family: 'Museo Sans Cyrl';font-weight: 100;">{store_name}</span><br>
      <span style="font-size:12pt; font-family: 'Museo Sans Cyrl';font-weight: 100; color:rgb(190,190,190)">Contract address: {contract_address}</span><br>
   </div>
</div>
<br>
<!-- mobile version -->
<div class="mobi row shadow" style="height:90px;cursor:pointer;border-radius:5px; " onclick="manageStore(this)" contract_address="{contract_address}">
   <div class="col-3" style="padding:20px">
      <img style="height:50px; border-radius: 50%" src="{store_logo}" />
   </div>
   <div class="col-9" style="padding-top:20px">
      <span style="font-size:14pt; font-family: 'Museo Sans Cyrl';font-weight: 100;">{store_name}</span><br>
      <span style="font-size:12pt; font-family: 'Museo Sans Cyrl';font-weight: 100; color:rgb(190,190,190)">{contract_address_display}</span><br>
   </div>
</div>
</script>



<!-- PENDING STORE ROW -->
<script  id="pending_store_row" language="text">
<br>
<div style="text-align:center">
<img  style="height:20px" src="/static/img/loading.gif"/> <a style="color:grey; cursor:pointer" href="https://etherscan.io/tx/{hash}" target="_blank">Transaction: {hash_shortened}</a><br>
</div>
</script>


<!-- MANAGE STORE PANEL -->
<script  id="manage_store_panel_element" language="text">
<div id="content_card" class="content_section shadow adaptable-cloud-container" style="background-color:white;border-radius: 5px;">
<span>Managing store: {contract_address}</span><br><br><br>
<div class="row">
<div class="col-sm-3"><span><strong>Owner:</strong></span></div>
<div class="col-sm-9"><span>{owner}</span></div>
<br><br>
<div class="col-sm-3"><span><strong>Wallet:</strong></span></div>
<div class="col-sm-9"><span>{wallet}</span></div>
<br><br>
<div class="col-sm-3"><span><strong>Products:</strong></span></div>
<div class="col-sm-9">
<div style="text-align:right">
{loading} <button type="button" class="btn green-button" onclick="createProduct()">Create product</button>
 </div>
 <br>
<span>{products_rows}</span>
<br><br><br>
</div>
<div class="col-sm-3"><span><strong>Orders received:</strong></span></div>
<div class="col-sm-9">
<span>{payments_rows}</span>
</div>

</div>
</div>

</script>

<!-- PRODUCT ROW -->
<script  id="product_row" language="text">
<div class="shadow" style="padding:10px; border-radius: 5px; ">
<table class="table" style="font-size:10pt; text-align:center">
   <tbody>
<tr>
   <td style="text-align:left; width:30%">Name: </td>
    <td style="text-align:left">{name}</td>
</tr>
<tr>
   <td style="text-align:left">Description: </td>
    <td style="text-align:left">{description}</td>
</tr>
<tr>
   <td style="text-align:left">Price: </td>
    <td style="text-align:left">{price}</td>
</tr>
<tr>
   <td style="text-align:left">Active: </td>
    <td style="text-align:left">{isactive}</td>
</tr>
<tr>
   <td style="text-align:left">Id: </td>
    <td style="text-align:left">{_id}</td>
</tr>
   </tbody>
</table>
<div style="text-align:right">
<button type="button" class="btn green-button" contract_address="{contract_address}" product_id="{_id}" onclick="payPreview(this)">Pay preview</button> {loading_delete_product} <button type="button" class="btn secondary" contract_address="{contract_address}" product_id="{_id}" onclick="{delete_function}">Delete</button>

 </div>
</div>
<br>
</script>


<!-- PAYMENT ROW -->
<script  id="payment_row" language="text">
<div class="shadow" style="padding:10px; border-radius: 5px; ">
<span><strong>Timestamp:</strong></span> <span>{timestamp}</span><br>
<span><strong>Customer id:</strong></span> <span>{customer_id}</span><br>
<span><strong>Product name:</strong></span> <span>{product_name}</span><br>
<span><strong>Product id:</strong></span> <span>{product_id}</span><br>
<span><strong>Price paid:</strong></span> <span>{price_paid}</span><br>
<span><strong>Sender:</strong></span> <span>{sender}</span><br>
</div>
<br>
</script>


<!-- CREATE PRODUCT PANEL ELEMENT --> 
<div class="modal fade" id="create_product_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
   <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">Create product</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         
         
         <div class="modal-body">
            <p style="color:grey">Name: </p>
            <div class="input-group mb-3">
               <input type="text" class="form-control" oninput="updateProductName(this)" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>
            <br>
            <p style="color:grey">Description:</p>
            <div class="input-group mb-3">
               <textarea class="form-control" rows="3" id="comment" oninput="updateProductDescription(this)"></textarea>
            </div>
            <p style="color:grey">Price ETH: </p>
            <div class="input-group mb-3">
               <input type="text" class="form-control" oninput="updateProductPrice(this)" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>
         </div>
         
    
         <div class="modal-footer">
            <button type="button" class="btn green-button" data-dismiss="modal" onclick="saveProduct()">Save</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         </div>
      </div>
   </div>
</div>  


<!-- PAY ELEMENT --> 
<div class="modal fade" id="pay_preview_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content" style="padding:20px">
         <h5 id="pay_product_name" class="modal-title" style="text-align:center"></h5>
         <br><br>       
         <table class="table" style="font-size:10pt; text-align:center">
            <tbody>
               <tr>
                  <td style="text-align:left; width:30%">Description: </td>
                  <td id="pay_product_description" style="text-align:left"></td>
               </tr>
               <tr>
                  <td style="text-align:left">Price: </td>
                  <td style="text-align:left"><span id="pay_product_priceInEth"></span><br><span id="pay_product_priceInWei" style="color:grey"></span></td>
               </tr>
            </tbody>
         </table>
         <div class="modal-body">
            <div style="text-align:center">
               <button id="pay_product_pay_button" product_id="" contract_address="" priceInWei="" customer_id="" account_address=""  type="button" class="btn green-button" data-dismiss="modal" onclick="pay(this)"></button><br><br>
               <span style="color:grey" data-dismiss="modal">Cancel</span> 
            </div>
         </div>
      </div>
   </div>
</div>
